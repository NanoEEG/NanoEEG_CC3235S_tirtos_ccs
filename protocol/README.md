> 除通道量化值为大端字节序，所有协议均为小端字节序

`@protocol/attr_protocol`
================
**控制通道协议**：NanoEEG属性层与上位机（plumberhub）交互的数据协议。上位机每次按照该协议向NanoEEG发送数据包后，要确保接收到NanoEEG的回复才能确认发送数据生效。

- 上位机 -> NanoEEG 

| 帧头 | 有效帧长 | 指令码 | 属性编号 | 通道编号 | 操作数 | 帧尾 |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| 0xAC | 除去帧头、帧尾和有效帧长的帧字节数 | <br>0x00 - 空指令<br/>  <br>0x01 - 读属性<br/> <br> 0x10 - 写属性 <br/> | @ref `attr/README.md` | 本版本不支持 默认0xFF | 写属性时该域存在 | 0xCC |

- NanoEEG ->  上位机

| 帧头 | 有效帧长 | 错误码 | 属性编号 | 回复数据 | 帧尾 |
|:---:|:---:|:---:|:---:|:---:|:---:|
| 0xA2 | 除去帧头、帧尾和有效帧长的帧字节数 | <br> 0x00 - 指令正确<br/>  <br>0x01 - 错误：对只读属性写入<br/>  <br> 0x02 - 错误：写属性操作数数据长度错误 <br/> <br>0x03 - 错误：待读写的属性不存在<br/> | @ref `attr/README.md` | 指令正确则回复该编号属性的属性值，否则该域不存在 | 0xC2 |

> **测试用例** 

>支持的采样率挡位  
>- [ 上位机 -> NanoEEG ] AC 03 01 0b FF CC
>- [ NanoEEG -> 上位机 ] A2 0A 00 0B FA 00 F4 01 E8 03 D0 07 C2 

`@protocol/eegdata_protocol`
================
**脑电数据通道协议**：NanoEEG向上位机（plumberhub）传输脑电数据的协议。

NanoEEG采用的AD芯片单片最大支持8通道采样，本设备采用多片AD芯片同步采集的方案，故规定每片AD芯片的8通道为一个通道组，设备支持的总通道数为通道组的倍数，本设备最大支持4通道组，即32通道。一个通道组每次采样数据包括“本组通道状态+八通道的采样量化值2”，若某一通道被禁用，则该通道的采样量化值为0x000000。

|数据帧头部|数据帧数据域|
|:-------:|:---------:|
| 23字节 | 样本数 x（数据域头部 + (本组通道状态 + 八通道 x 每通道量化字节数）x 通道组数)字节 |

- **数据帧头部**

| 设备ID | UDP包累加滚动码 | 本UDP包总样本数 | 本UDO包有效通道总数 | UNIX时间戳 | 保留数 |
|:--:|:--:|:--:|:--:|:--:|:--:|
| @ref `attr/attrTbl.c 仪器UID` | 按照时间顺序标识，开始采集后第一包为0，后每一包+1 | @ref `attr/attrTbl.c 每包含AD样本数` | @ref `attr/attrTbl.c 仪器总通道数 ` | 本版本不支持 | 0xFFFFFFFF |
| uint32_t | uint32_t | uint16_t | uint8_t | uint64_t | uint32_t |


- **数据帧数据域** 

| 起始分隔符 | 样本序号 | 精密时间戳 | 本组通道状态 | 通道1 | 通道2 | ...  | 通道9 | 起始分隔符 |
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| 0x23 |   按照时间顺序标识，每包第一个样本为0，后每一个样本+1 | 本版本为10us单位，相对开始采样时点的增量型时间戳 | 每八通道状态 默认0xC0 0x00 0x00 | 通道1量化值 | 通道1量化值 | ... | 通道8量化值 | 0x23  |
| uint8_t | uint16_t | uint32_t | int24 | int24 补码 |int24 补码 | ... | int24 补码 | 下一个样本 | 


`@protocol/evtdata_protocol`
================
**事件标签通道协议**：NanoEEG向上位机（plumberhub）传输事件标签数据的协议。

| 设备ID | UNIX时间戳 | 精密时间戳 | 标签类型 |
|:--:|:--:|:--:|:--:|
| @ref `attr/attrTbl.c 仪器UID` | 本版本不支持 | 事件标签的精密时间戳，本版本为10us单位，相对开始采样时点的时间戳 | 标签数据 |
| uint32_t | uint64_t | uint32_t | uint8_t |